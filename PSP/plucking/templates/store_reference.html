{% extends 'base.html' %}

{% load static %}

{% block title %} Plucking Scheme {% endblock %}

{% block body %}
<html>
<title>PSP</title>
<head>
    <style>
      * {
        font-family: sans-serif;
      }
      table {
        border-collapse: collapse;
        table-layout: inherit;
        width: 50%

      }
      td, th {
        border: 1px solid 11113c;
        text-align: center;
        padding: 8px;
      }
      tr:nth-child(even) {
        background-color: bfcaf3;
      }



    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.min.js"
            integrity="sha512-1/RvZTcCDEUjY/CypiMz+iqqtaoQfAITmNSJY17Myp4Ms5mdxPS5UV7iOfdZoxcGhzFbOm6sntTKJppjvuhg4g=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"></script>
    <script src="{% static 'path/to/your/javascript/file.js' %}"></script>

</head>
<body>

<div class="container-fluid bg-e6e3cc text-center">

    <h2>Plucking Scheme</h2>
    <h3>Plucking Scheme</h3>
    <p>Total Ha: {{ total_ha }}</p>
    <p>Total Days: {{ total_days }}</p>
    <p>Ha/Day Target: {{ ha_day_target }}</p>
    <p>Pluckers Required: {{ pluckers_req }}</p>
    <p>Daily Actual: {{ daily_ha_plucked }}</p>

    <table>
        <tr>
            <th>Zone/Fields</th>
            <th>Type(VP/SD)</th>
            <th>Ha.</th>
            <th>Days to Plk</th>
            <th>Prune Age</th>
            <th># of Schemes</th>
            <th>Growing Days C/f</th>
        </tr>
        <tr>
            <td>ZoneE-12VP</td>
            <td>VP</td>
            <td>12.93</td>
            <td>1</td>
            <td>2</td>
            <td>185</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneE-5SD</td>
            <td>SD</td>
            <td>13.02</td>
            <td>2</td>
            <td>2</td>
            <td>145</td>
            <td>2</td>
        </tr>
        <tr>
            <td>ZoneE-3SD</td>
            <td>SD</td>
            <td>8.27</td>
            <td>1</td>
            <td>1</td>
            <td>92</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneE-15VP</td>
            <td>VP</td>
            <td>10.65</td>
            <td>2</td>
            <td>0</td>
            <td>152</td>
            <td>2</td>
        </tr>
        <tr>
            <td>ZoneE-7SD</td>
            <td>SD</td>
            <td>14.99</td>
            <td>1</td>
            <td>3</td>
            <td>167</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneE-14VP</td>
            <td>VP</td>
            <td>22.60</td>
            <td>2</td>
            <td>4</td>
            <td>323</td>
            <td>TP</td>
        </tr>
        <tr>
            <td>ZoneF-11SD</td>
            <td>SD</td>
            <td>16.01</td>
            <td>2</td>
            <td>2</td>
            <td>178</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneF-10SD</td>
            <td>SD</td>
            <td>22.55</td>
            <td>3</td>
            <td>1</td>
            <td>251</td>
            <td>2</td>
        </tr>
        <tr>
            <td>ZoneF-2VP</td>
            <td>VP</td>
            <td>7.41</td>
            <td>1</td>
            <td>1</td>
            <td>106</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneF-42VP</td>
            <td>VP</td>
            <td>7.51</td>
            <td>2</td>
            <td>2</td>
            <td>107</td>
            <td>2</td>
        </tr>
        <tr>
            <td>ZoneF-6SD</td>
            <td>SD</td>
            <td>17.00</td>
            <td>2</td>
            <td>0</td>
            <td>189</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneF-43VP</td>
            <td>VP</td>
            <td>4.60</td>
            <td>1</td>
            <td>1</td>
            <td>66</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneG-8VP</td>
            <td>VP</td>
            <td>9.07</td>
            <td>1</td>
            <td>3</td>
            <td>130</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneG-1SD</td>
            <td>SD</td>
            <td>17.06</td>
            <td>2</td>
            <td>1</td>
            <td>190</td>
            <td>2</td>
        </tr>
        <tr>
            <td>ZoneG-44VP</td>
            <td>VP</td>
            <td>7.19</td>
            <td>1</td>
            <td>2</td>
            <td>103</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneG-13VP</td>
            <td>VP</td>
            <td>14.34</td>
            <td>2</td>
            <td>1</td>
            <td>205</td>
            <td>2</td>
        </tr>
        <tr>
            <td>ZoneG-9SD</td>
            <td>SD</td>
            <td>20.43</td>
            <td>2</td>
            <td>3</td>
            <td>227</td>
            <td>1</td>
        </tr>
        <tr>
            <td>ZoneG-4VP</td>
            <td>VP</td>
            <td>16.36</td>
            <td>2</td>
            <td>3</td>
            <td>234</td>
            <td>1</td>
        </tr>

    </table>
    <script>
      //Calculate the Ha/Day Target
      let total_ha = 0;
      let total_days = 0;
      let ha_day_target = 0;
      let pluckers_req = 0;
      let daily_actual = 0;

      let table = document.getElementsByTagName('table')[0];
      let rows = table.getElementsByTagName('tr');

      for (let i = 1; i < rows.length; i++) {
        total_ha += parseFloat(rows[i].getElementsByTagName('td')[2].innerHTML);
        total_days += parseInt(rows[i].getElementsByTagName('td')[3].innerHTML);
      }
      ha_day_target = Math.round(total_ha / total_days);
      console.log('Total Ha:', total_ha, 'Total Days:', total_days, 'Ha/Day Target:', ha_day_target);

      //Calculate the Pluckers Required
      for (let i = 1; i < rows.length; i++) {
        if(rows[i].getElementsByTagName('td')[1].innerHTML === 'VP') {
          if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) >= 700 && parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) <= 900) {
            pluckers_req += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 700)
          }
          else if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) > 900) {
            pluckers_req += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 900)
          }
        }
        else if (rows[i].getElementsByTagName('td')[1].innerHTML === 'SD') {
          if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) >= 900 && parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) <= 1200) {
            pluckers_req += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 900)
          }
          else if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) > 1200) {
            pluckers_req += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 1200)
          }
        }
      }
      pluckers_req = Math.round(pluckers_req);
      console.log('Pluckers Required:', pluckers_req);

      //Calculate the Daily Actual
      for (let i = 1; i < rows.length; i++) {
        if(rows[i].getElementsByTagName('td')[1].innerHTML === 'VP') {
          if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) >= 700 && parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) <= 900) {
            daily_actual += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 700) * parseFloat(rows[i].getElementsByTagName('td')[6].innerHTML);
          }
          else if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) > 900) {
            daily_actual += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 900) * parseFloat(rows[i].getElementsByTagName('td')[6].innerHTML);
          }
        }
        else if (rows[i].getElementsByTagName('td')[1].innerHTML === 'SD') {
          if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) >= 900 && parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) <= 1200) {
            daily_actual += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 900) * parseFloat(rows[i].getElementsByTagName('td')[6].innerHTML);
          }
          else if (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) > 1200) {
            daily_actual += (parseInt(rows[i].getElementsByTagName('td')[5].innerHTML) / 1200) * parseFloat(rows[i].getElementsByTagName('td')[6].innerHTML);
          }
        }
      }
      daily_actual = Math.round(daily_actual);
      console.log('Daily Actual:', daily_actual);


    </script>
</div>
</body>
</html>
{% endblock %}
<!DOCTYPE html>
<html>
<head>
	<title>Tea Garden Plucking Schedule</title>
	<!-- CSS styles -->
	<style>
		body {
			font-family: Arial, sans-serif;
		}

		table {
			border-collapse: collapse;
			width: 100%;
		}

		th, td {
			text-align: left;
			padding: 8px;
			border: 1px solid #ddd;
		}

		tr:nth-child(even) {
			background-color: #f2f2f2;
		}
	</style>
	<!-- External resources -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script src="script.js"></script>
</head>
<body>
	<h1>Tea Garden Plucking Schedule</h1>
	<p>Here are the statistics for the plucking scheme:</p>
	<table>
		<thead>
			<tr>
				<th>Statistics</th>
				<th>Values</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Total Ha</td>
				<td><span id="total-ha">20</span></td>
			</tr>
			<tr>
				<td>Total Days</td>
				<td><span id="total-days">10</span></td>
			</tr>
			<tr>
				<td>Ha/Day Target</td>
				<td><span id="ha-day-target">2</span></td>
			</tr>
			<tr>
				<td>Pluckers Required</td>
				<td><span id="pluckers-required">10</span></td>
			</tr>
			<tr>
				<td>Daily Actual</td>
				<td><span id="daily-actual">1.8</span></td>
			</tr>
		</tbody>
	</table>
</body>
</html>
